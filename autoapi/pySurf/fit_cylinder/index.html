<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pySurf.fit_cylinder &mdash; pyXsurf  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/mystnb.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="pySurf.instrumentReader" href="../instrumentReader/index.html" />
    <link rel="prev" title="pySurf.find_internal_rectangle" href="../find_internal_rectangle/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> pyXsurf
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../example.html">Example usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../conduct.html">Code of Conduct</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../dataIO/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dataIO</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../readConfig/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readConfig</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../readConfig2/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readConfig2</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../test/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">test</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../test_program_path/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">test_program_path</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plotting/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plotting</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../annotations/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">annotations</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../astupidloop/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astupidloop</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../test_interactive/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">test_interactive</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tkmatplotlibembedded/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tkmatplotlibembedded</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v1/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">v1</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">v2</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pyGeo3D/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyGeo3D</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pyProfile/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyProfile</span></code></a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf</span></code></a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../FEA/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.FEA</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../PointCloud/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.PointCloud</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../_instrument_reader/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf._instrument_reader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../affine2D/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.affine2D</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../clip/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.clip</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../data2D/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.data2D</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../data2D_class/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.data2D_class</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../distanceTable/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.distanceTable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../find_internal_rectangle/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.find_internal_rectangle</span></code></a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.fit_cylinder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../instrumentReader/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.instrumentReader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../outliers2d/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.outliers2d</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../plane_fit/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.plane_fit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../points/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.points</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../psd2d/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.psd2d</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../radial/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.radial</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../roi/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.roi</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../stress_compensation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.stress_compensation</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../testSurfaces/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.testSurfaces</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../utilities/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">utilities</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pyXsurf</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">API Reference</a> &raquo;</li>
          <li><a href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf</span></code></a> &raquo;</li>
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.fit_cylinder</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/autoapi/pySurf/fit_cylinder/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pySurf.fit_cylinder">
<span id="pysurf-fit-cylinder"></span><h1><a class="reference internal" href="#module-pySurf.fit_cylinder" title="pySurf.fit_cylinder"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pySurf.fit_cylinder</span></code></a><a class="headerlink" href="#module-pySurf.fit_cylinder" title="Permalink to this headline"></a></h1>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline"></a></h2>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline"></a></h3>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.closest_point_on_line" title="pySurf.fit_cylinder.closest_point_on_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">closest_point_on_line</span></code></a>(points, lVersor, lPoint)</p></td>
<td><p>From a list of points in 3D space as Nx3 array, returns a Nx3 array with the corresponding closest points on the line.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.cylinder_error" title="pySurf.fit_cylinder.cylinder_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cylinder_error</span></code></a>(odr=(0, 0, 0, 0, 0, 0), points=None, retall=False, extra=False)</p></td>
<td><p>Given a set of N points in format Nx3, returns the error on the cylinder defined by origin and direction as a 6(3+3) dim vector.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.cylinder_error3" title="pySurf.fit_cylinder.cylinder_error3"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cylinder_error3</span></code></a>(odr: float = (0, 0, 0, 0), points: float = None, radius: float = None, retall: bool = False, extra: bool = False, xy: bool = False) → float</p></td>
<td><p>Calculate rms surface error for points wrt a cylinder defined by axis vector.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.cone_error" title="pySurf.fit_cylinder.cone_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cone_error</span></code></a>(odr=(0, 0, 0, 0, 0, 0), points=None, retall=False, extra=False)</p></td>
<td><p>Given a set of N points in format Nx3, returns the rms surface error on the cone defined by origin (intercept of the axis with x=0) and direction,</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.cone_error3" title="pySurf.fit_cylinder.cone_error3"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cone_error3</span></code></a>(odr=(0, 220.0, 0, 0), points=None, coeff=None, retall=False, extra=False)</p></td>
<td><p>Given a set of N points in format Nx3, returns the rms surface error on the cone defined by</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.subtract_cylinder" title="pySurf.fit_cylinder.subtract_cylinder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subtract_cylinder</span></code></a>(pp, odr, sampleName='')</p></td>
<td><p>odr: 6-vector (origin_y,origin_y,origin_z,direction_x,direction_y,direction_z),</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.subtract_cone" title="pySurf.fit_cylinder.subtract_cone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subtract_cone</span></code></a>(pp, odr, sampleName='', outfile=None, vmin=None, vmax=None)</p></td>
<td><p>odr: 6-vector (origin_y,origin_y,origin_z,direction_x,direction_y,direction_z),</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.fit_cone" title="pySurf.fit_cylinder.fit_cone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit_cone</span></code></a>(pts, odr2, zscale=1.0, keepnan=False, **kwargs)</p></td>
<td><p>fit pts and return residuals. Info are printed. odr2 is starting guess.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.fit_cylinder" title="pySurf.fit_cylinder.fit_cylinder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit_cylinder</span></code></a>(pts, odr2, zscale=1.0, keepnan=False, align=False, **kwargs)</p></td>
<td><p>fit pts and return residuals. Info are printed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline"></a></h3>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pySurf.fit_cylinder.fom_func" title="pySurf.fit_cylinder.fom_func"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fom_func</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.closest_point_on_line">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">closest_point_on_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lVersor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lPoint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pySurf.fit_cylinder.closest_point_on_line" title="Permalink to this definition"></a></dt>
<dd><p>From a list of points in 3D space as Nx3 array, returns a Nx3 array with the corresponding closest points on the line.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.cylinder_error">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">cylinder_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pySurf.fit_cylinder.cylinder_error" title="Permalink to this definition"></a></dt>
<dd><p>Given a set of N points in format Nx3, returns the error on the cylinder defined by origin and direction as a 6(3+3) dim vector.
If retall is set, additional values are returned :</p>
<blockquote>
<div><p>radius: best fit radius for the cylinder.
deltaR[N,3]: deviation from radius for each point.</p>
</div></blockquote>
<p>extra is equivalent to retall, renamed 2018/02/15 kept for backward compatibility</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.cylinder_error3">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">cylinder_error3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retall</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#pySurf.fit_cylinder.cylinder_error3" title="Permalink to this definition"></a></dt>
<dd><p>Calculate rms surface error for points wrt a cylinder defined by axis vector.</p>
<p>Given a set of N points in format Nx3, returns the error on the cylinder defined by origin and direction of axis. Best fit radius is calculated as best fit if not provided. Otherwise the provided value is used with no fit.
nan are not allowed and must be filtered before calling the function (this is more efficient if the function is called many times, e.g. in optimization).
:param points: points in format Nx3
:param odr: 4-element axis vector in format (origin_y,origin_z,direction_x,direction_z)
:param radius: If provided, radius is used, otherwise best fit radius for the given axis is calculated.
:type radius: optional
:param retall: if set, additional values are returned :</p>
<blockquote>
<div><p>radius: best fit radius for the cylinder.
deltaR[N,3]: deviation from radius for each point.</p>
</div></blockquote>
<dl class="field-list simple">
</dl>
<p>extra (optional) : equivalent to retall, renamed 2018/02/15 kept for backward compatibility.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>rms of radial distance of points from ideal cylindrical surface.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.cone_error">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">cone_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pySurf.fit_cylinder.cone_error" title="Permalink to this definition"></a></dt>
<dd><p>Given a set of N points in format Nx3, returns the rms surface error on the cone defined by origin (intercept of the axis with x=0) and direction,
passed as 4-vector odr(origin_y,origin_z,direction_x,direction_z).
Best fit cone for odr is calculated from linear fit of data.
If retall is set, additional values are returned :
coeff: best fit radius for the cone as [m,q] for x’ distance from x=0 plan on cone axis R(x’)=m x’ + q. Half cone angle is atan(m).
deltaR[N,3]: deviation from radius for each point.
extra is equivalent to retall, renamed 2018/02/15 kept for backward compatibility</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.cone_error3">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">cone_error3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">220.0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coeff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pySurf.fit_cylinder.cone_error3" title="Permalink to this definition"></a></dt>
<dd><p>Given a set of N points in format Nx3, returns the rms surface error on the cone defined by
its axis (radius and apex are determined by best fit).
Axis is defined as a 4 elements vector odr=(x,z,cx,cz), not in xz plane.
origin (intercept of the axis with y=0) and director cosines.
If coeff is passed as input, the fit for cone surface is not performed and the coeff values are used.
If retall is set, additional values are returned :
coeff: best fit radius for the cone as [m,q] for x’ distance from x=0 plan on cone axis R(x’)=m x’ + q. Half cone angle is atan(m).
deltaR[N,3]: deviation from radius for each point. Bump positive convention (smaller radius is positive).
extra is equivalent to retall, renamed 2018/02/15 kept for backward compatibility</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.subtract_cylinder">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">subtract_cylinder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampleName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pySurf.fit_cylinder.subtract_cylinder" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>odr: 6-vector (origin_y,origin_y,origin_z,direction_x,direction_y,direction_z),</dt><dd><p>note that  this is redundant, since only two components are enough for direction
(magnitude is irrelevant).</p>
</dd>
</dl>
<p>pp: complete set of points Npx3</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.subtract_cone">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">subtract_cone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampleName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pySurf.fit_cylinder.subtract_cone" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>odr: 6-vector (origin_y,origin_y,origin_z,direction_x,direction_y,direction_z),</dt><dd><p>note that  this is redundant, since only two components are enough for direction
(magnitude is irrelevant).</p>
</dd>
</dl>
<p>pp: complete set of points Npx3</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.fit_cone">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">fit_cone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odr2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zscale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepnan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pySurf.fit_cylinder.fit_cone" title="Permalink to this definition"></a></dt>
<dd><p>fit pts and return residuals. Info are printed. odr2 is starting guess.</p>
<p>fom,deltaR,pars=fit_cone(pts,odr2,fom_func)
zscale is the factor to multiply data to obtain same units as x and y,
e.g. 1000. for x and y in mm and z in um. Output is in same unit as input.
pts and deltaR enter and exit with z in microns
parameters for optimization can be passed as keyword arguments, e.g.:</p>
<p>#evaluate fom without optimization fit_cone/fit_cylinder
deltaR,o = fom_function(pts,odr,zscale=1000.,options={‘radius’:radius})</p>
<p># fit from starting guess value odr0
deltaR,odr=fit_cylinder(c,odr0,zscale=1000.,options={‘maxiter’:500},</p>
<blockquote>
<div><p>method=’Nelder-Mead’)</p>
</div></blockquote>
<p>typically:
odr2=(span(xg).sum()/2.,220.,0,0.) #use nominal value for guess direction.</p>
<p>See developer notes in code.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.fit_cylinder">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">fit_cylinder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odr2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zscale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepnan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pySurf.fit_cylinder.fit_cylinder" title="Permalink to this definition"></a></dt>
<dd><p>fit pts and return residuals. Info are printed.
odr2: starting guess for fom func parameters.</p>
<blockquote>
<div><p>for cylinder_error3, it is (origin_y,origin_z,direction_x,direction_z),
meaning for axis nearly parallel to y: odr2=(x_center,R,0.,0.)
fom,deltaR,pars=fit_cylinder(pts,odr2,fom_func)</p>
</div></blockquote>
<dl class="simple">
<dt>zscale: factor to divide z data to obtain same units as x and y,</dt><dd><p>e.g. 1000. for x and y in mm and z in um. Output is in same unit as input.</p>
</dd>
<dt>parameters for optimization with scipy.optimize.minimize can be passed as keyword arguments,</dt><dd><p>e.g.: deltaR,odr=fit_cylinder(c,odr2,options={‘maxiter’:500},method=’Nelder-Mead’)</p>
</dd>
<dt>if keepnan is set True nans are reinserted after the fit keeping same size for array,</dt><dd><p>otherwise nans are removed.</p>
</dd>
</dl>
<p>if align is set True, rotate data to align axis and return residuals on rotated grid (can be resampled on data or viceversa
with resample_points)– NOT WORKING</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="pySurf.fit_cylinder.fom_func">
<span class="sig-prename descclassname"><span class="pre">pySurf.fit_cylinder.</span></span><span class="sig-name descname"><span class="pre">fom_func</span></span><a class="headerlink" href="#pySurf.fit_cylinder.fom_func" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../find_internal_rectangle/index.html" class="btn btn-neutral float-left" title="pySurf.find_internal_rectangle" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../instrumentReader/index.html" class="btn btn-neutral float-right" title="pySurf.instrumentReader" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, vincenzo cotroneo.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>